{"version":3,"sources":["turbopack:///[project]/Documents/Pets/ambilux/frontend/src/app/admin/page.module.scss [app-ssr] (css module)","../../../../../../../../Documents/Pets/ambilux/frontend/src/app/admin/page.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"email\": \"page-module-scss-module__yEglYa__email\",\n  \"form\": \"page-module-scss-module__yEglYa__form\",\n  \"login\": \"page-module-scss-module__yEglYa__login\",\n  \"message\": \"page-module-scss-module__yEglYa__message\",\n  \"name\": \"page-module-scss-module__yEglYa__name\",\n  \"password\": \"page-module-scss-module__yEglYa__password\",\n  \"submit\": \"page-module-scss-module__yEglYa__submit\",\n  \"text\": \"page-module-scss-module__yEglYa__text\",\n  \"title\": \"page-module-scss-module__yEglYa__title\",\n});\n","'use client';\r\n\r\nimport { FormEvent, useEffect, useState } from 'react';\r\nimport styles from './page.module.scss';\r\nimport { useLocalStorage } from 'usehooks-ts';\r\n\r\nexport default function Admin() {\r\n  const [token, setToken, removeToken] = useLocalStorage<any>('token', { value: null });\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (token.value) {\r\n      fetch('http://158.160.34.62:3001/messages', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token.value}`\r\n        }\r\n      })\r\n        .then(response => response.json())\r\n        .then(parsed => setMessages(parsed));\r\n    }\r\n  }, [token]);\r\n\r\n  async function onSubmit(event: FormEvent<HTMLFormElement>) {\r\n    event.preventDefault()\r\n \r\n    const formData = new FormData(event.currentTarget)\r\n    const response = await fetch('http://158.160.34.62:3001/login', {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'POST',\r\n      body: JSON.stringify(Object.fromEntries(formData)),\r\n    });\r\n \r\n    const data = await response.json()\r\n    \r\n    if (!data) {\r\n      alert('Неверный логин или пароль');\r\n    } else {\r\n      setToken(data);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      { !token.value && \r\n        <form suppressHydrationWarning className={styles.form} onSubmit={onSubmit}>\r\n          <span className={styles.title}>Вход</span>\r\n          <input name='login' className={styles.login} placeholder='Логин'/>\r\n          <input name='password' type='password' className={styles.password} placeholder='Пароль'/>\r\n          <button type=\"submit\" className={styles.submit}>Войти</button>\r\n        </form>\r\n      }\r\n      { token.value && messages.map((it: any) => \r\n        <div suppressHydrationWarning className={styles.message}>\r\n          <span className={styles.name}>{it.name}</span>\r\n          <span className={styles.email}>{it.email}</span>\r\n          <p className={styles.text}>{it.text}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"0BAAA,EAAA,CAAA,CAAA,CACA,MAAA,yCACA,KAAA,wCACA,MAAA,yCACA,QAAA,2CACA,KAAA,wCACA,SAAA,4CACA,OAAA,0CACA,KAAA,wCACA,MAAA,wCACA,4CCRA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,CAAC,EAAO,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,eAAA,AAAe,EAAM,QAAS,CAAE,MAAO,IAAK,GAC7E,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EAc3C,eAAe,EAAS,CAAiC,EACvD,EAAM,cAAc,GAEpB,IAAM,EAAW,IAAI,SAAS,EAAM,aAAa,EAC3C,EAAW,MAAM,MAAM,kCAAmC,CAC9D,QAAS,CACP,OAAU,mBACV,eAAgB,kBAClB,EACA,OAAQ,OACR,KAAM,KAAK,SAAS,CAAC,OAAO,WAAW,CAAC,GAC1C,GAEM,EAAO,MAAM,EAAS,IAAI,GAE3B,EAGH,EAAS,EAHA,CACT,MAAM,4BAIV,CAEA,MAlCA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACJ,EAAM,KAAK,EAAE,AACf,MAAM,qCAAsC,CAC1C,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAM,KAAK,CAAA,CAAE,AAC1C,CACF,GACG,IAAI,CAAC,GAAY,EAAS,IAAI,IAC9B,IAAI,CAAC,GAAU,EAAY,GAElC,EAAG,CAAC,EAAM,EAyBR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,OAAO,WAC1B,CAAC,EAAM,KAAK,EACZ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,wBAAwB,CAAA,CAAA,EAAC,UAAW,EAAA,OAAM,CAAC,IAAI,CAAE,SAAU,YAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAA,OAAM,CAAC,KAAK,UAAE,SAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,QAAQ,UAAW,EAAA,OAAM,CAAC,KAAK,CAAE,YAAY,UACzD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,WAAW,KAAK,WAAW,UAAW,EAAA,OAAM,CAAC,QAAQ,CAAE,YAAY,WAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAW,EAAA,OAAM,CAAC,MAAM,UAAE,aAGlD,EAAM,KAAK,EAAI,EAAS,GAAG,CAAC,AAAC,GAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,wBAAwB,CAAA,CAAA,EAAC,UAAW,EAAA,OAAM,CAAC,OAAO,WACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAA,OAAM,CAAC,IAAI,UAAG,EAAG,IAAI,GACtC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAA,OAAM,CAAC,KAAK,UAAG,EAAG,KAAK,GACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,EAAA,OAAM,CAAC,IAAI,UAAG,EAAG,IAAI,SAK7C"}